let router,express,DB_URL,errorHandler,mongoose,cors,bodyParser,multer,path;_fc3‍.w("./router",[["default",["router"],function(v){router=v}]]);_fc3‍.w("express",[["default",["express"],function(v){express=v}]]);_fc3‍.w("./config",[["DB_URL",["DB_URL"],function(v){DB_URL=v}]]);_fc3‍.w("./middlewares/errorHandler",[["errorHandler",["errorHandler"],function(v){errorHandler=v}]]);_fc3‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_fc3‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_fc3‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_fc3‍.w("multer",[["default",["multer"],function(v){multer=v}]]);_fc3‍.w("path",[["default",["path"],function(v){path=v}]]);








const app = express()
// make monggose db connection
var upload = multer();

mongoose.connect(DB_URL, { useNewUrlParser: true, useUnifiedTopology: true });
const db = mongoose.connection;
db.on('error', _fc3‍.g.console.error.bind(_fc3‍.g.console, 'connection error:'));
db.once('open', function () {
    // we're connected!
    console.log("connected to Facebook_clone Database")
});

global.appRoot = path.resolve(__dirname);

app.use(cors())
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());


app.use("/api", router)
app.use('/uploads', express.static('uploads'))





// ...
// Right before your app.listen(), add this:
if (process.env.NODE_ENV == "production") {
    app.use(express.static(path.join(__dirname, "/client/build")))
    app.get("*", (req, res) => {
        res.sendFile(path.resolve(__dirname, "client", "build", "index.html"));
    });
}

app.use(errorHandler)

PORT = process.env.PORT | 8000

app.listen(PORT, () => console.log(`listening at port ${PORT}`))