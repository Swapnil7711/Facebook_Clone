let DEBUG_MODE,ValidationError,CustomeErrorHandler;_19a‍.x([["errorHandler",()=>errorHandler]]);_19a‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_19a‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_19a‍.w("../services/CustomErrorHandler",[["default",["CustomeErrorHandler"],function(v){CustomeErrorHandler=v}]]);




       const errorHandler = (err, req, res, next) => {


    let statusCode = 500

    let data = {
        message: "Internal Serever Error",

        ...(DEBUG_MODE === true && { original_message: err.message })

    }

    if (err instanceof ValidationError) {

        statusCode = 422

        data = {
            message: err.message
        }

    }

    if (err instanceof CustomeErrorHandler) {

        statusCode = 409

        data = {
            message: err.message
        }

    }

    res.status(statusCode).json(data)
}